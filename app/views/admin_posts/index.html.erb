<div class="news admin home">
  <% if logged_in_as_admin? %>
    <%= render "admin_index" %>
  <% else %>
    <div class="primary header module">
      <!--Descriptive page name, messages and instructions-->
      <h2 class="heading"><%= link_to ts("AO3 News"), admin_posts_path %></h2>
      <div class="icon"></div>
      <!--/descriptions-->

      <!--subnav-->
      <ul class="navigation actions" role="navigation">
        <li><%= render 'filters' %></li>
        <li><%= link_to_rss admin_posts_path(:rss) %></li>
      </ul>
      <!--/subnav-->
    </div>
    <!--main content-->
    <% @admin_posts.each do |admin_post| %>

      <div class="news module group" role="article">
        <%= render "admin_post", admin_post: admin_post %>
        <!-- BEGIN comment section -->
        <h3 class="landmark heading"><%= ts("Comment") %></h3>
        <ul class="actions" role="navigation">
          <% if admin_post.count_visible_comments > 0 %>
            <li><%= link_to (admin_post.count_visible_comments == 1 ?
                            ts("Read %{comment_count} Comment", comment_count: admin_post.count_visible_comments.to_s) :
                            ts("Read %{comment_count} Comments", comment_count: admin_post.count_visible_comments.to_s)),
                            admin_post_path(id: admin_post.id, anchor: "comments", show_comments: true) %></li>
          <% end %>
          <li><%= link_to ts("Add Comment"), admin_post_path(id: admin_post.id, anchor: "comments", add_comment: true) %></li>
          <li>
            <%= form_for(:kudo, url: kudos_path, html: { method: 'post', class: 'js-new-kudo' }) do |kudo_form| %>
              <%= kudo_form.hidden_field :commentable_id, :value => admin_post.id %>
              <%= kudo_form.hidden_field :commentable_type, :value => 'AdminPost' %>
              <%= button_tag(type: 'submit', class: 'js-kudo-submit') do %>
                <%= ts("Kudos â™¥") %>
                <span class="kudo-count js-kudo-count" style="display: <%= admin_post.kudos.count > 0 ? 'inline' : 'none' %>"
                  ><%= admin_post.kudos.count %></span>
              <% end %>
            <% end %>
          </li>
        </ul>
        <div class="js-kudos-message"></div>
        <% if flash[:commentable_id] == admin_post.id %>
          <%= flash_div :comment_error, :comment_notice %>
        <% end %>
        <!-- END comment section -->
      </div>
    <% end %>
    <!--/content-->
    <hr class="clear" />

    <!--subnav-->
    <%= will_paginate @admin_posts %>
    <!--/subnav-->
  <% end %>
</div>
